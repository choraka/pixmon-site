<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>픽셀몬스터 진화도감 - 깜몬 라인</title>
<link rel="stylesheet" href="./style.css" />
</head>
<body>
  <header><h1>진화도감 · 깜몬 라인</h1></header>
  <main>
    <section class="line-block">
      <h2 class="line-title">깜몬 라인</h2>
      <div class="svg-wrap">
        <svg id="svg-깜몬" width="1200" height="600" viewBox="0 0 1200 600"></svg>
      </div>
    </section>
  </main>

  <!-- 모달 -->
  <div id="monster-modal" class="modal">
    <div class="modal-card">
      <div class="modal-head">
        <img id="modal-img" alt="">
        <h3 id="monster-title" class="modal-title">—</h3>
        <button class="close-btn" id="close-modal">닫기</button>
      </div>
      <div class="modal-body">
        <div class="row"><div class="label">속성</div><div id="field-attribute" class="pill"></div></div>
        <div class="row"><div class="label">색깔</div><div id="field-color" class="pill"></div></div>
        <div class="row"><div class="label">단계</div><div id="field-stage" class="pill"></div></div>
        <div class="row"><div class="label">진화조건</div><div id="field-evo" class="pill"></div></div>
        <div class="row"><div class="label">이전트리</div><div id="field-prev" class="linklist"></div></div>
        <div class="row"><div class="label">다음트리</div><div id="field-next" class="linklist"></div></div>
        <div class="row"><div class="label">기본 스탯</div>
          <div class="stats">
            <div class="stat"><div class="k">코스트</div><div class="v" id="stat-cost"></div></div>
            <div class="stat"><div class="k">쿨타임</div><div class="v" id="stat-cooldown"></div></div>
            <div class="stat"><div class="k">크리확률</div><div class="v" id="stat-critical"></div></div>
            <div class="stat"><div class="k">공격력</div><div class="v" id="stat-attack"></div></div>
            <div class="stat"><div class="k">이동속도</div><div class="v" id="stat-speed"></div></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="./js/tree.js"></script>
  <script>
  (async () => {
    let data;
    try {
      const res = await fetch('./data/gammon.json');
      if (!res.ok) throw new Error('fetch 실패');
      data = await res.json();
      console.log('✅ gammon.json 로드 완료');
    } catch (err) {
      console.warn('⚠️ JSON 불러오기 실패, 임시 데이터 사용');
      data = {
        line: "깜몬",
        monsters: [
          { name: "깜몬", next: ["코로몬"], previous: [] },
          { name: "코로몬", next: ["아구몬"], previous: ["깜몬"] },
          { name: "아구몬", next: ["그레이몬"], previous: ["코로몬"] },
          { name: "그레이몬", next: ["메탈그레이몬"], previous: ["아구몬"] },
          { name: "메탈그레이몬", next: ["워그레이몬"], previous: ["그레이몬"] },
          { name: "워그레이몬", next: [], previous: ["메탈그레이몬"] }
        ]
      };
    }

    renderMonsterTree(data.line, data.monsters);
  })();
  </script>
</body>
</html>
